echo "ğŸ” Lint + typecheck"
npx lint-staged
LINT_EXIT_CODE=$?

if [ $LINT_EXIT_CODE -ne 0 ]; then
  echo ""
  echo "âŒ Lint/typecheck failed!"
  echo "ğŸ’¡ Fix the errors above before committing"
  exit 1
fi

echo ""
echo "ğŸ§ª Running UI snapshot tests"
npm test
TEST_EXIT_CODE=$?

if [ $TEST_EXIT_CODE -ne 0 ]; then
  echo ""
  echo "âŒ Tests failed!"
  echo "ğŸ’¡ Possible reasons:"
  echo "   â€¢ UI component changed - review snapshots with 'npm test -- -u'"
  echo "   â€¢ Test error - check the output above"
  exit 1
fi

echo ""
echo "âœ… All checks passed! Committing..."
